Develope an intuition how to deal with cravings

I am quit for over a year now and feel like i have complete control over cigarettes now.

But the thing with those cancer sticks is that, if you feel like you have them under control, they try to stab you in the back.

Yesterday i got in a dangerous situation with 2 friends of mine (both are smokers). 
And after that situation they lit a cigarette to calm down and relax.
And i was ***so*** close to light one up for myself aswell.
I felt like the nicotine addiction brain fog was overlaying my mind. I couldn't think clearly.
Also my friend offered me a cig.

In this situation i didn't think reasonable anymore. My mind told me to smoke.

That