I keep lying to myself

Every night while I'm trying to go to sleep, I tell myself that I'm done smoking for good. Then, like clockwork, I wake up and immediately go have a smoke. I feel awful the whole day and end up smoking more, because what's the point of quitting if you've already had one that day? It's always the same cycle every night, I just need a way to break the cycle and take my quit more seriously.