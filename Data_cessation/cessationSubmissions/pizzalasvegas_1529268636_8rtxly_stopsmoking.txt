How do I really, truly quit?

I was tobacco free for 10 months, and then I made a giant life transition and moved to a new city, alone, where I didn't know anyone. I started smoking again. I'm not really sure why--perhaps to deal with the boredom and loneliness. I want to quit again. I loved not smoking. I felt healthier and in control of my life. This set back has been so discouraging though. How do I once-and-for-all quit--even with the boredom and loneliness? 