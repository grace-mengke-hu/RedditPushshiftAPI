2nd time I try,1 week free, I have many questions-20 years old

Hi Everyone,
This is the first time I am gonna talk about my addiction. I started smoking at 17 years old ( because of Cannabis mainly, then I smoked cigarets, and I started liking them, and before I knew it, I was hooked). Now, I read Alan Carr EasyWay to stop smoking, and I was on a trip with my parents, so I decided to quit. It was more a quick then a thoughtful decision, just in the moment. I lasted 2 weeks, then I came back to my university. I wanted to stay the same, and since a lot of my friends smoke, I was getting a lot of 2nd hand smoke. I broke the 2nd day. Now the problem is not my will, I can bear the 5 first days. The problem are my friends. It's very hard to sit with them everyday because my willpower have limits. 
Is changing friends the right decision ? Secondly, How bad is 2nd hand smoke? Thirdly, I guess it's impossible to smoke cannabis now that I've stopped cigarets since I can't mix them right? And last, anyone who was in my situation ? A university student? Care to share how did u manage, I am gonna miss the smoke break during studies so hard too. This is kinda my story, I created an account just to ask question I didn't have an answer to, because most people targeted by books etc are old people. Thank you !