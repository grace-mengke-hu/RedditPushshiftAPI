Why I'm still not able to quit?

I tried so many times to stop my smoking habit but not wholeheartedly I guess, all gone to waste tries, maybe I smoked much more because that pack was my "last pack". All I did which was right I never quit my wish to stop smoking.

 And now as days go by I realize how I'm wasting my time, life, how pointless smoking is. But still I go to the store and buy a pack mindlessly. After smoking first I regret buying immediately. However it continues this way everyday. What I'm missing here?