I feel like a failure

After 2 years and two months I had a shit day today and smoked a cigarette. I have been really depressed lately, and now I just feel even worse because I ruined all that progress I made. 