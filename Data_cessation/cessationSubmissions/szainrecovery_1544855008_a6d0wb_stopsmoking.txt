Quitting Smoking with Mental Illness on board

I'm 35 and have had schizoaffective disorder for 12 years. After being discharged from the psych unit after a failed suicide attempt I started playing Hearthstone obsessively, and would smoke between rounds. It turned into the most nasty habit I have, and three years later I'm finding it so hard to quit. I just had a panic attack today, and cigs were the only thing that calmed me down. I also have vivid nightmares regularly and wake up to calm myself down with a cigarette. 

I've gone two or three days with patches or a e-cigarette. But I always get nervous and buy a pack. Anyone out there with mental illness that found a way to stop smoking completely? 