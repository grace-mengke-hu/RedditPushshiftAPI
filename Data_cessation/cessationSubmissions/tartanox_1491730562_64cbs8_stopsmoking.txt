Help! All my friends are smokers...

Heya pals,

so I have a problem... I've been smoking for a while now and I am really motivated to quit. I have quit before and I know exactly where it went wrong - my friends all smoke. Almost all of the people I hang out with are smokers and I am mostly friends with them because I smoke (met in the smoking area, started chatting, became friends). So I'm in a super-tough situation. I really do want to quit but when I hang out with my friends, they all smoke (which is totally fine, their decision and all) but it tempts me. Last time I quit, I lasted for a bit before I asked somebody for a smoke and then slipped back. It's especially bad when we go for drinks somewhere. I do want to go out with the smokers (because it's where we have the best conversations and the most fun) but it makes it SO difficult not to smoke to stand in a circle of all your friends who smoke (especially after having a few pints)
So, do any of you have any techniques to deal with this? I have a technique to deal with cravings from stress (keeping my fingers busy with a wee game) but I feel like I need something to save me from the cravings I get with my mates. And I really don't want to lose them as friends or stop hanging out with them...

Thanks so much in advance!