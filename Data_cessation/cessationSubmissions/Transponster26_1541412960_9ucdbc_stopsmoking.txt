Lost confidence

So I stopped smoking Jan this year and was going strong for like 6 or 7 months until I had a couple of joints, not really realising at the time that I'd become addicted to nicotine again and now I'm basically back to smoking full time. I re-read Allan Cars Stop Smoking book but whereas before I was certain I would never smoke again, now I just don't really feel that way and am kind of at a loss as to how to stop now. I want to stop but then I get to a craving and just give in immediately. I don't know how to get back to the confidence I had before. I don't want to vape as I don't just want to replace my addiction with another one. Anyone had something similar and have some advice? Thanks :)