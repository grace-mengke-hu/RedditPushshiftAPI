Problems with relapse

I quit a pack a day habit cold turkey after 5 years of smoking. For 4 and 1/2 months, I didn't take so much as a drag of a cigarette. I would get drunk with a group of smoker friends and be able to stand outside while they all smoked without being tempted. Then, about 2 months ago I broke down, bought a pack of cigarettes, smoked two of them and threw the rest away. Since then, I've been smoking on and off. I'll smoke a few cigarettes, then go days without smoking. I'll smoke half a pack while drinking, then give the other half pack to a friend at the end of the night. Or I'll buy a pack, smoke some, then throw it away. I feel terrible every time that I smoke (both physically and mentally), but I can't seem to stay away. I feel would be easier if I had fully relapsed to smoking again, because then I could steel my resolve and say "no more". But I feel like I'm on a slippery slope of normalizing smoking again, and I can't seem to get my willpower together enough to do another permanent quit. Please give me some suggestions on how I can stop this horrible, body-destroying habit for good.