hopefully i would have just smoked my last cigarette

when i am asked why i smoke i simply say it is because i enjoy it but for the past year (been smoking for 6) i have been wishing to quit in the back of my mind. 
 i go through good periods where i do not smoke for a week or so, but then i go out (all my friends smoke) / or go out drinking / smoke in between studying for a break for a test and lose all control over my quitting. clearly there needs to be a change in my habits, how did you go about sticking to them?