How do I break the habit of smoking while I drink?

I used to be an every day smoker; less then a pack a day.  Although there are occasional exceptions, I've relinquished smoking to just when I drink.  When I first decided I didn't want to smoke any more (after a private event at a bar where we all chain smoked non-stop) I went a few weeks of drinking without smoking.  Obviously that didn't last very long. 

Does anyone have experience kicking the urge to smoke when you're out drinking with friends who also smoke?  I find this incredibly difficult.  Especially because going out for a smoke is such a social thing and I've met so many people because of it.