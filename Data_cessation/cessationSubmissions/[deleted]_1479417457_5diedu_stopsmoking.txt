Anyone else start smoking due to mental illness/anxiety and have trouble quitting because of it?

I started smoking because of my mental illness and I'm having a hard time stopping. When I'm feeling good its pretty easy to not smoke but when my illness resurfaces it feels like there is nothing I one to do more then light up a cig. Anyone else here in a similar situation as me? How did you stick with quitting?