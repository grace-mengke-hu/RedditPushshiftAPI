Relapsed, what am I doing wrong?

The first time I relapsed was on day 10, second time was on day 7. The cravings were stronger than the first 3 days and I just couldn't handle it. The thing that was the same with those relapse days was that I was invited or wanted to go out drinking and I think in my head I was like I can't with out smoking and well, I smoked two packs yesterday. At this point I'm just venting but any suggestions would help.