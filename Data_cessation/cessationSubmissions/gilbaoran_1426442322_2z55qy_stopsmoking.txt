Smoked shisha after not smoking for 8 months, and my flatmate smokes, driving me crazy, stuck in China. What could I do?

Hello, I am a 20 year old student studying in China for half a year to learn chinese since late Feb, and I quit smoking August of last year, because my sister found out and told me to quit. I don't know if it's just me, but I always craved smoking even when I quit for a long period of time, and I have weekly, extremely realistic, "nightmares" of me giving in to the craving and ending up smoking. In China, everyone seems to smoke everywhere, including my flat mate in my dorm (I requested him to stop smoking, he still smokes, and I talked to the staff, and they can't do anything about him, and I am not allowed to switch rooms until April. It was pretty annoying, but manageable levels until recently, as long as I didn't go to clubs or certain bars (some offer free cigarettes apparently). Last night, I just had a really bad day, and ended up smoking shisha with my friends after going to a bar. And now, I am going crazy, because there's smokers everywhere, and especially when my flat mate (my room is right next to his, with a tiny common area and bathroom) smokes. I can't sleep at all, and I know that I really can't last long this way. I can't really speak Chinese at all, and I really don't have any money, so going to the doctor really isn't an option for me. I tried to keep my smoking habits a secret when I smoked, so not many people actually know I smoked, and I can't ask anyone near me for advice :( and I really really really don't want to start smoking again.
I actually don't know if this is the right subreddit, so sorry if I am posting wrongly, but any advice would be well appreciated!!! Thanks!!

edit: extra information if maybe needed! I am 20 years old, started smoking in the June/July of 2013. I had recently gained independence, by going to college, and tried drinking/smoking for the first time ever, which was a pretty bad idea. I smoked about 1 pack a day, but sometimes went up to 2.5 per day, if I played a lot of games, or went out to drink. I tried quitting once January of last year, but I ended up smoking in March again, after a stressful fight with my parents + working at a restaurant where the owner, chef, other waitstaff, and mots customers smoked.

Thanks!!!!!