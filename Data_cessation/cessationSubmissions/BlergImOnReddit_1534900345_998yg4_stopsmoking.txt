How do you quit when you hate yourself?

God, here we fucking go again. Quit for 8 months, even made it through 2 months after losing my job. Bragged about that even, right here on this sub. And then a friend came to visit who was a smoker and I though, it’s ok, what could one puff hurt.

Well.

2 weeks back into smoking. I realize now that I’ve been depressed (ok, I knew before but I didn’t take it seriously enough). I’m in a bad place in life. I know things are going to be ok - lots of gigs and prospects on the horizon. I’ve struggled with depression my whole life and when I have “quit” before I was always in a better place. I don’t want to wait for that, though. So now what? I’m not suicidal, but I’m a way I feel like every smoke is contributing to the slow suicide I internally feel like is just fine. 

Anyone have any tips for quitting under such circumstances?