I quit smoking and drinking a need some advice

I quit smoking and drinking cold turkey 2 mo ago. YAY. I started working out at a CrossFit gym and love it. Several things are a problem. I'm having difficulty with depression. I will go to the gym for a solid 2 weeks then miss 1 day and out of now where I will miss a weak and make excuses like I'm tired and I don't feel well and so on. Just being lazy. Another issue is today's workout had high cardio and I was producing ALOT oh phlem and mucus. I felt as though I was doing more spitting then actually working out. When will that subside? Last but not least I'm having some serious weight issues. I will keto, count macros, intermittent fasting and nothing is helping with my weight. I haven't been watching as closely but with how hard I'm working out I'd expect some loss but I'm reality I'm gaining. Any advice to conquer this battle of weight loss. I'm extremely proud of my efforts so far and I want to continue to grow in my journey and not get frustrated and give up. 