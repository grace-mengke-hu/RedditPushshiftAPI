After a month of quitting I started again. Mad at myself.

I quit for a surgical procedure I needed done. I think having something force me to stop is what helped. A month later once I knew it was “okay” my drinking friends offered me a smoke and since then I’ve bought three packs. After at first just bumming cigarettes...
I need to stop making excuses. Detoxing again is gonna suck. But I really wanna actually quit this time. Can anyone give me advice on sticking with my quitting even after such a gap then “relapse”?