quit smoking /anxiety /shamed for behavior

I was a smoker for almost 20 years. I recently quit cold turkey. On day two I was doing OK until that evening when friends gathered at our place for drinks. A couple of my friends are smokers. I found that I needed get away from the people who were smoking I was becoming shaky and stressed. I went outside and sat by myself. I noticed that the group was watching from a distance but wouldn't come over to talk to me. My thoughts became obsessive and I felt (and later confirmed) that I was making people uncomfortable and that they were talking about me and judging me. I started crying and I couldn't stop. Finally I was able to get up and get in my truck. I just needed to get away from everyone. Later that night my husband was very upset with me for my behavior. He proceeded to tell me that I was out of line and I offended our friends. My husband continued tell me how that he was not going to put up with me behaving that way. And even told me he would rather I smoke then act like that.  I felt terrible. I was on the floor crying as he told me all these things. 

I need some help understanding what I did wrong. I can't understand why everyone was so upset with me. 
I haven't been able to interact with people these last couple days because of fear of this event happening again. 
 