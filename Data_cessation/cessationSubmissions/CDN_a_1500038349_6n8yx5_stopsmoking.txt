Desperately need to quit!

I desperately need to quit smoking after 48 years! Now retired I just can't afford it and my doctor says I'm going to have the "big one" soon... if I persist. My biggest problem... is when I drink wine, party it up a bit, smoke a little weed.... how... HOW... the heck do you do this...??? Thanks in advance to anyone that can relate and offer some hope.