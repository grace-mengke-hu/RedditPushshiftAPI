Is feeling guilty a right thing to relapse?

I was an ex chainsmoker. Over a month back I (20m)  comitted a wrong and I am terribly depressed about that, I have been drowning myself in alcohol and cigarettes. I wasn't smoking for a while, but I relapsed and now I almost smoke a pack a day. It's been a month since I've started smoking again and I know its bad for me and I don't know how to stop because I'm so addicted to it again. Please help me