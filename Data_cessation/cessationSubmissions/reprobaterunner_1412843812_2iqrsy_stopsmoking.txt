Keep falling down the smokey rabbit hole

UGH - so I have been battling with quitting for the last few months, while my friend managed to go smoke free successfully. I keep falling down the rabbit hole, making me feel worse, just want to give in and smoke. 

Any advise to keep going and not smoke when: drinking, feeling nervous or when other people offer?

Yesterday I smoked like half a pack in an evening because I was drinking. HELP.