Need help!

Hey guys, I'm pretty sure similar questions have been posted on this page before but I'd really appreciate some help here. I'm a senior in college right now and was smoking close to a pack a day my sophomore year and junior year. I've pretty much completely cut out buying packs and smoking by myself. However, when around friends I can somehow never resist the urge to smoke a couple of cigarettes. Also, during a night out drinking I smoke close to half a pack just during the 3-4 hours that I am outside. While I have greatly reduced my smoking, how do I completely quit such that I can control even when friends are smoking or even while being drunk. Thanks! 