Fucked up and trying to reverse course

So I quit last summer after smoking for a little over 4 years (basically age 18-22) and had been doing really well, surviving a bunch of my usual triggers and getting to the point where cravings were few and far between. Last weekend my girlfriend unexpectedly broke up with me and then Tuesday morning I work I found out there's a good chance my job might be eliminated (or at a minimum I'd have to move to a new city). I've basically been unable to process any of this and tonight I broke down and bought a pack.

I feel so stupid with a cigarette in my hand right now--my roommates didn't even know I had ever been a smoker. I really want to leave smoking as something in my past but the present is just kicking my ass today. I guess all I can do is wake up and not smoke tomorrow and find a better way to deal? 