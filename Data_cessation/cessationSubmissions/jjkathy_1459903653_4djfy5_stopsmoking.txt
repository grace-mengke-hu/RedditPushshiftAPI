Quitting made me go mental.

Hey guys,

I've been smoking for more or less 10 years now. For some reason it hasn't been that bad during past year. I could go for a few days without cigarettes and smoked less overall. I recently made two attempts to quit smoking, first was extremely easy because I went on a water fast the same day. I think that it helped my body remove all the nicotine and toxins because I had absolutely no cravings after. Sadly, I made a stupid decision to 'have one smoke' during a social event and started smoking again.
A few days ago I had another attempt and it was the strangest experience. I can honestly say that cigarette craving was very manageable and I think I could make it this time. But I got so incredibly angry and sad it's beyond words. I made it for two days before I drove to the gas station to have my smoke. During the first night I woke up in the middle of a night on a verge of a panic attack. I was so angry I was crying all the time, I could feel the anger as a physical  sensation. Had arguments with my partner every 10 minutes and we barely ever fight. When I got a pack of cigarettes I didn't want to smoke at all, the craving was not there, I only did it so we will stop fighting and I will feel calm again.


I'm trying to understand what happened here. I tried quitting many times before, sometimes I succeeded for a few days but sometimes for months. The only problem I ever came across were cravings, I have never experienced any mood swings, definitely not that extreme. I really want to quit for good this time and I don't even feel like smoking anymore, hate the habit so much that I finally think that I'm ready. But I don't want to go mental again especially since it affects my relationship. Does anyone have an idea why it happened now all of the sudden? Anything that could help? Any help would be so much appreciated, I am desperate here. 


EDIT: To everyone saying that I should go to therapy: I have been to a therapist before because of my anxiety and it turned out as I expected. It's nothing very serious and what was recommended is a change of lifestyle. I already quit caffeine which made it a lot better, I also meditate. The problem is that I recently moved abroad and it's been a very stressful experience. Have been broke the majority of time so I didn't eat well and it has a huge effect on my well-being. Also got some pretty bad news very recently. I'm assuming that it makes it harder to quit but I also don't believe in 'waiting for a better time to quit' strategy so was looking for some tips to make it now.