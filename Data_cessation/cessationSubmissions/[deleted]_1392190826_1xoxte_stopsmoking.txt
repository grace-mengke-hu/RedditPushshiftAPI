Help for a friend.

Hello! This seems like a great community. So heres the deal: 
I have a close friend that has confided in me several times that they would like to quite smoking, and have attempted many times in the past. The major problem is that all 3 of his roommates smoke, encourage him to smoke as well as his coworkers, even when they know he wants to quit. Once he does quit his motivation fails him over and over.  

Has anyone else been in a situation like this? where everyone around you smokes??

 Also, links to persuasive articles and posts would be very helpful for him in his weak moments.