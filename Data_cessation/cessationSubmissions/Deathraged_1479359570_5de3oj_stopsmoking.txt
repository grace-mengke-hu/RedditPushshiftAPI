Smoking is seriously impacting my performance

So I'm in the Army in one of the more physical MOSs. Today my company did a 12 mile ruck march in formation. Before we even reached 2 miles, I couldn't breathe and I was just sucking. I ended up falling out at around mile 7. That's not the only thing that I've noticed. Everytime we run, even if it's just a short leg to the pull up bars, I feel like I'm dying. Even the slow company run we do on Fridays hurts. I want to try and quit but I'm surrounded by tobbacco. Almost all my superiors and peers use some form of tobbacco. Cigarettes, dip, whatever it may be. I just can't get the urge to go away. It doesn't help that I also love smoking. But I know if I keep doing it, my performance will just keep getting worse. Does anyone have any tips? Been through something similiar? Any advice is appreciated.