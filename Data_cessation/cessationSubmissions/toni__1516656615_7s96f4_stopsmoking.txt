10 years smoking, 3 years not, now 6 months smoking again. Advise please?

More than 3 years ago I quited smoking. I was never a heavy smoker, none-to-a-couple of rolling cigarettes a day, during the week, few more when going out and having some drinks. 

Anyway, I had been hooked since I was a teenager (now 28), and decided it was time to stop. My entire family has been a smoker at some point, most of the time keeping it secret from the others. My dad and my uncle, with whom I share a lot of physical traits, had (survived) heart attacks because of tobacco. I like it a lot cycling and hiking, and I could feel how I could be more fit if not smoking. On top of that, my girlfriend at that time despised me smoking, and helped/urged me to quit. 

So when I moved from Germany back to Spain because of my job, I used the "context change" and stopped. It wasn't very difficult (only at the beginning, specially when going out). And definitely very pleasant to stop caring about me having cigarettes on when going out, leaving the restaurant for a puff, etc. I also read Allan Carr's book after I had quited, not sure about how much it helped (I had the feeling that mostly, I didn't want to read that boring self-help book ever again in my life and continue reading literature for pleasure, so if that meant quiting, I did it). I also remember browsing r/stopsmoking now and then, upvoting everyone's posts and thinking about people saying "just do it, just quit", that they were soooo right.

Some months ago I had the first cigarette in 3 years, one night at a club. It didn't feel very pleasant, and I didn't try it again in a while. But then, every time more and more often (once every some weeks, only on celebrations, only on the weekends, only when having some drinks...), I started asking for cigarettes to people. I must admit they felt very pleasant, I was not hooked (yet) and I enjoyed those moments.

Finally, half a year ago, my girlfriend and I broke up (luckily it was totally unrelated to tobacco, I couldn't forgive myself if it was). But one of the first things I did when I met my best friend for some beer after the break up was buying the first pack of cigarettes since I had quit.

Since then, I am back to my few rolling cigarettes every day (I think even more than I was before). I don't enjoy them anymore, I worry about having them on me when I go out, I stay in the cold sometimes in order to smoke, I get sick more often, I perform worst when cycling. I haven't kept one of the beautiful things my ex did for me. Most of my friends don't smoke nowadays, all of them find it a terrible idea to do so.


**And here is my question to this subreddit: how does one do it to stop again? 10 years in, 3 years out, and now half a year in again. Should it be easier because I already did it? It feels much harder now. I have tried starting Allan Carr's book again, but I can't believe in his words anymore, because I guess I don't trust myself anymore with respect to this. If someone here has gone through a similar process, and succeeded, I would greatly appreciate his/her advise :)**

And finally, to anyone who has quited a while ago, and now feels like having a cigarette some day, don't do it. And if you have already done so, don't do it again. And if you have been doing it for some days/weeks/months, but still didn't buy any, don't do it. Hope it helps somebody.