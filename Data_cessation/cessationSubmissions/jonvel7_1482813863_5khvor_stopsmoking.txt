Smoking is ruining my sex life and I've decided to quit, but I need help.

A little backstory, I've been dating this amazing girl from work that I have absolutely fallen in love for. She makes me so happy and it has been quite a joyous time. We've started to have sex just a few weeks ago, but I've been having problems. It's not the usual anxiety that I get, and I really think it's the smoking and I'm tired of it. I'm tired of being a slave to smoking and I'm tired of having to lie to her that I quit a while ago. 

I almost broke into tears today because she blamed herself, and also said this was the first time something like this has happened which just killed me. She said that she understood and that it was okay, but I know it's not. I need help quitting, Im planning to do excercise which I need to get back in shape for next time we get intimate. 

The thing is that I just can't control myself, I get a lot of anxiety from work and from life. In short I'm done. I smoked my last cigarette today after she left (I was stressed out by the event) and I've made up my mind of quitting and never looking back. I really do need help and support because frankly Im alone in this. My family doesn't know and my friends all smoke. I kind of wanna die right now, but I know I need to be strong and keep on going.

Sorry for the vent but today was the last straw, I don't want tonight to happen again ever.