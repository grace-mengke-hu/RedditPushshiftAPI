How does one cope with impulses/urges?

Pardon me if I do this incorrectly -- my first time posting in Reddit. I have been trying my best to stop and stay away from smoking. There are those moments though, those moments when I feel something break (figuratively) inside me and I'm tearing apart my apartment looking for a smoke. Hell, I even look for my vape.
  I know that I had started because, as weird as it sounds, I felt like it helped me breathe. I had started kind of on a whim after, in 2010, my relationship of 3 years (turned fianc√© in the last year) left me to pursue other females. When I started, I tried different kinds till I settled on a particular brand and stuck with it. I tried very hard to keep to one pack a week as long as I didn't have a rough day (or week). I only spent 3 years with it because I wanted to start being healthy. I haven't been doing all that well. Last year I took to vaping to curb the urge but it honestly just had me going to buy a new pack. I stopped for a few months but when I get stressed or feel like I'm going to hyperventilate, 
So now I'm stuck in this desire mode where there are days when I'm so sick of trying to avoid the urge. I pass people vaping and smoking, and I want to just run over to the nearest store to buy my own. I know it's the right thing to stop. I know the heath risks and all that. 
I say all that to ask, what do you do to cope?