Trying to quit for the 3rd time since 17th of May

Every time I party with my friends, as soon as I get a bit of alcohol in me, I always end up joining them outside to smoke a cigarette. Then after that comes another one, and suddenly I've smoked half a pack, and the next day I regret it. I used to smoke everyday before I tried quitting, but now I feel like I smoke just as much as I did before, but instead of smoking a little every day I just go 5 days without smoking and then smoke all the cigarettes I would've smoked before on this one day. Last time I smoked was yesterday. I smoked about 7 cigarettes.
English is not my native language, so if something is difficult to understand then please let me know.

TL;DR What can I do to prevent myself from smoking while drinking?