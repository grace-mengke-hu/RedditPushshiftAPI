Help! Please!

I'm on day 17 and I haven't had a problem for a solid week now. Only thing I deal with daily is a craving or two when I'm driving. But today, we learned that a close friend of my brother's killed himself. I am going to see him when I get off work in an hour and I know my dad and several other smokers will be there. These are all great people who mean a lot to us and who my brother and I've admired growing up, but I'm scared that being surrounded by all these smokers I'm going to go outside with them and bum one.

All I want to do right now is hug my brother, crack open a beer, smoke a cigarette and listen to what my dad has to say between cigar puffs. 

Why do I have this strong urge and this sudden lack of confidence that I won't be able to abstain??

Update: Thank you to everyone below for your encouragement. I spent the last hour of my shift at work last night browsing /r/stopsmoking and got my head straight. Then I focused on where I needed to be in order to help my brother and his friends during this tough time. 

I didn't have any intense cravings like I thought I would have, and the second hand smoke didn't bother me too much. So, false alarm, thankfully! Thanks again everyone for your support.