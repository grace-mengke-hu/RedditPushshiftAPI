I'm a teen smoker and need some advice

I'm 16 and go to high school where literally over one half of students smoke. Our lessons last for 45 minutes and between them we get 5 minute breaks (one 15 minute, too).

So in the last school year, during every break, along with around 10 of my friends I lit a cigarette, 2-3 during the 15 minute break, and obviously became extremely addicted. There wasn't a day when I smoked less than 15 cigarettes, and when going out on Saturdays I'd buy two packs of Marlboro Reds and smoke them up in under 10 hours.

Continuing the habit when the school ended I was shortly on a pack, or two to three when out, a day. Four days ago, when I could actually hear my lungs struggling while I was breathing I said I'd stop. (My badge says one day because I smoked some green tea yesterday to make sure I don't break down on the third day.)

I am writing here because very soon two evens will put my decision to quit on a real test:

The first is that it's my friends 18th birthday in a week and around ten of us are going to his holiday house and staying there for 2 days. Now, obviously I'll have a couple of drinks and be tempted to smoke - I usually bought a carton half-half with a friend for over-a-day-long events. On top of that everyone around me will be smoking like chimneys and asking me where is my smoke or offering me theirs. How can I get through the birthday and still be nicotine free? It seems impossible but hopefully someone can share similar experiences.

And the second thing is obviously the start of 11th grade. How do I still hang out with my friends every break and not smoke? Should I just ditch them and wait in the class? Oh, how I loved getting to school 20 minutes before classes at seven in the morning and smoking cigarette after cigarette and watching the smoke play in cool air; taking huge drags to make my lungs hurt. It was what got me out of the bed in the morning. Seriously, the best feeling ever.

I know it's the usual type of self-posts you see here, but I'm going to try kicking the habit before it's too late.