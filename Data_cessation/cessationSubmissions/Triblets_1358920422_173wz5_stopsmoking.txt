Third time quitting

Been smoking for almost two and a half years. This is my third time quitting, first time was last summer and it lasted two weeks, and the second time was in October and it lasted a month and a half. I'm determined to kick it for good, but its always when friends are smoking that I can't resist. 
During my last quit period, I could feel my lungs getting better and I actually took pleasure in watching the amount of black phlegm get smaller and smaller over the first few weeks. Wish me luck, I'll be browsing through for support.