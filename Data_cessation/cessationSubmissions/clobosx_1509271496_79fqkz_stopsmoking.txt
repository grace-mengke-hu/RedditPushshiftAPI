Skip pals birthday?

I am battling to stop social smoking, especially since I have found out a health issue has returned that may be made worse by smoking. I beat myself up about it if I do it and feel generally terrible.

I am perfectly able to not even think about smoking when drinking with non smokers, however as soon as people are around who I associate with smoking, all resolve is out the window.

Anyway on Saturday is a close pals birthday and we are going to a club night. It would be a definite smoking evening around bad influence people.

She is moving away in the new year and I want to spend time with her, however I can see myself falling at this hurdle. Would it be terrible to make an excuse and skip, or should I go and try to be strong?