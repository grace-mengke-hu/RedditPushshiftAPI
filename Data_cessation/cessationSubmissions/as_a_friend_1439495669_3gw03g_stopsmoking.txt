Quitting and mental illness.

In May 2014 i successfully quit smoking for 5 months. By that time i was smoking two packs a day. I was at a good place in my life having overcome a difficult period with mental illness problems so i decided to make a step towards a better future and quit smoking - cold turkey. But in october after some problems arose  i had another crisis/mental breakdown and started smoking again. I tried to quit once again after i became more stable in may 2015 but only lasted one day. My psych counselor said i wasn't ready yet and i still needed smoking - probably just to make me feel less awful for failing. This July my sister, a smoker since she was 16 years old, learned she has terminal cancer. After watching her in pain for a month i said to myself that i have to quit before the same thing happens to me. So yesterday at 12 pm i smoked the last cigarette and went to sleep. I only lasted 21 hours - just a minute ago i had another cigarette. I couldn't stand the anxiety and the negative thoughts so i caved in. I don't know how i did it back then but i feel i can't do it again... I don't just have the negative thoughts that come with quitting, i also have the mental illness which makes it worse. Does anyone else here have similar experiences - or have had success quitting while having mental problems??