Feeling so much guilt

I've been dealing with so much and feeling so stressed, so of course I pick this time in my life to quit smoking. I was doing great for 3 days and tonight just had a moment of no self control and smoked 3 cigarettes just to make me feel better. Now I just feel so much guilt for not sticking with it. I don't know why, but I get into this identity crisis whenever I try to quit. I convince myself that smoking is a part of who I am and I'm not 'me' if I don't smoke. I guess I just need some positive thoughts right now. I want to quit, but I've been so depressed so there's a part of me that just doesn't care.