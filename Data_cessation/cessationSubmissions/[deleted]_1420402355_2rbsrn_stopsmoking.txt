How can I quit smoking while drinking?

I used to smoke all the time. Now there is no way I can smoke while sober. It's just painful and nasty. However, when I drink (especially beer), I get this extreme urge to smoke. I will smoke every 20-30 minutes when I drink. It's just this craving I get. Since I'm buzzed or drunk, I don't notice the pain or nastiness, I just notice the extra buzz I get. How can I put an end to smoking while I drink?