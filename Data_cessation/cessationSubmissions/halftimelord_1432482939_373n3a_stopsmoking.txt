Tips for not smoking whilst out and drinking?

In the past, I've tried to give up smoking many times, but my main stumbling point has been getting drunk. Drunk me smokes like a fucking chimney. Anyway, I've not smoked for 103 days (!!) and I've gotten drunk in situations just at people's homes with small amounts of non-smokers, and I've managed to abstain.

However, my biggest problem is going out and drinking. I'm planning on going out sometime this week to a bar, where friends do smoke.

Any top tips for not smoking whilst drinking/drunk, short of getting my non-smoking friend to tackle me if I so much as look at a cigarette for too long?