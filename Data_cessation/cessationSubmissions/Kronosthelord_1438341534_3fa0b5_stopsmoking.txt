Need help/advice for quitting (M 19)

For as long as I can remember, I've been against smoking and drinking. That's the way I was brought up. Three years ago, due to a bad breakup and not the best company, I started both. I stopped drinking because of the effects it had on me, but haven't been able to quit smoking. My parents found out and asked me to stop and my girlfriend continuously urges me to stop. That didn't work. A lot of my current friends smoke and that makes it harder to stop. Additionally, I study Mass Media and that adds a lot of pressure in regards to projects and there's a lot of drama with one teacher particularly hating me, which makes me smoke out of stress. 

I also play a lot of Dota 2(video game) and I feel like smoking every time a match goes bad. 

Could anyone advice me on what to do to quit? I've tried ,seriously, thrice so far and I've only gone as far as a week. It's gotten to the point where I can barely run, and I feel out of breath after climbing two flights of stairs. I'm still not able to stop. Can anyone help?