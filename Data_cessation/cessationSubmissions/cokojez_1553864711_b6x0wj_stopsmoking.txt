Surviving social gatherings

Sooo I quit almost a week ago, and I've been doing fine until now. 

Tonight I am going to see some friends (some of them are smokers) we are going out and we will drink. And I don't know what to do to minimize chances of relapsing. 

This day has been shitty so far and my initial reaction to problems would of course be smoking, but I can't do that and I don't want to do that to myself.

So, my question is, what can I do to survive today, if:
- I am already irritated
- I'll drink tonight, without smoking, for the first time in years
- People around me will smoke