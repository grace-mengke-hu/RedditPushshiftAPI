Relapsed but not giving up

I was 77 days without one and I don't feel like going back to smoking just cause of one fucking cigarette. 
I was saturday at a party with my gf when an old friend came to us and stroked my beard without any reason. That prompted the most inefficient and stressful discussion I've had in a long long time, that just ended when I resolved the issue with the two of them together in the same room. At that point I couldn't do anything but turn to the barman and his girl (which takes care of the front door of the place) and ask for a cig. I smoked that shit with disgust for the smell and the taste, and by the end I was already regreting my relapse. 
What I have learned from this is that you have to be careful when you're under too much stress, because that's the most easy moment for you to give up without any observation and say "fuck it, I'll have one!". I fell like I've failed a major test in my recovery from nicotine addiction, but I learned something from myself and I'll be prepared for the next time.