Relapsed yesterday while out drinking, feel horrible about it

I quit smoking about 10 days ago and even though I've "quit" multiple times in the past, I've always cheated here and there, smoking maybe 1 every 2-3 days. This time it went great and I didn't. 

Yesterday we had plans to drink (me, a friend and my boyfriend) and I made it abundantly clear to them in the last few days that I did not want to go downtown to hit the bars, mainly because I knew that being downtown & drunk, within 2 weeks of quitting would end in a relapse. Long story short I thought we were gonna have fun at home drinking, they didn't and wanted to go downtown. I should have just stayed the fuck home but I didn't wanna sit by myself all night while they are out partying. So I went along. I was so upset with what might happen that I even cried on the way there. And I did, I smoked I think 2 or 3 cigarettes and now I feel AWFUL. I realize that relapse is part of the process but it was just going so good. Now I feel like I've completely failed. 

It is very important for me to quit smoking because of some serious health issues and medications I am on. Have you relapsed? How did you deal with it? Did you also cut down on drinking alcohol to begin with as you were quitting smoking? 